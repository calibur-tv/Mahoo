(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{315:function(t,e,n){t.exports={"pin-1-pc-media":"pin-1-pc-media_36tsQ",pin1PcMedia:"pin-1-pc-media_36tsQ",desc:"desc_2iLTt","pin-1-pc":"pin-1-pc_2vpWi",pin1Pc:"pin-1-pc_2vpWi",title:"title_yYP3L",media:"media_2aleH",text:"text_36HVK",badge:"badge_dzqRd",music:"music_1zf5N",video:"video_W64Pp","skeleton-loading":"skeleton-loading_h2GMS",skeletonLoading:"skeleton-loading_h2GMS",skeleton:"skeleton_3xDfV"}},325:function(t,e,n){t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var l=e[o]={i:o,l:!1,exports:{}};return t[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)n.d(o,l,function(e){return t[e]}.bind(null,l));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(object,t){return Object.prototype.hasOwnProperty.call(object,t)},n.p="/dist/",n(n.s=52)}({0:function(t,e,n){"use strict";function o(t,e,n,o,l,r,c,d){var h,f="function"==typeof t?t.options:t;if(e&&(f.render=e,f.staticRenderFns=n,f._compiled=!0),o&&(f.functional=!0),r&&(f._scopeId="data-v-"+r),c?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),l&&l.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(c)},f._ssrRegister=h):l&&(h=d?function(){l.call(this,this.$root.$options.shadowRoot)}:l),h)if(f.functional){f._injectStyles=h;var m=f.render;f.render=function(t,e){return h.call(e),m(t,e)}}else{var v=f.beforeCreate;f.beforeCreate=v?[].concat(v,h):[h]}return{exports:t,options:f}}n.d(e,"a",function(){return o})},3:function(t,e){t.exports=n(54)},33:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:t.itemSelected,"is-disabled":t.disabled||t.groupDisabled||t.limitReached,hover:t.hover},on:{mouseenter:t.hoverItem,click:function(e){return e.stopPropagation(),t.selectOptionClick(e)}}},[t._t("default",[n("span",[t._v(t._s(t.currentLabel))])])],2)};o._withStripped=!0;var l=n(4),r=n.n(l),c=n(3),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h={mixins:[r.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(t,e){var n=this.select,o=n.remote,l=n.valueKey;if(!this.created&&!o){if(l&&"object"===(void 0===t?"undefined":d(t))&&"object"===(void 0===e?"undefined":d(e))&&t[l]===e[l])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(a,b){if(this.isObject){var t=this.select.valueKey;return Object(c.getValueByPath)(a,t)===Object(c.getValueByPath)(b,t)}return a===b},contains:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];if(this.isObject){var n=this.select.valueKey;return t&&t.some(function(t){return Object(c.getValueByPath)(t,n)===Object(c.getValueByPath)(e,n)})}return t&&t.indexOf(e)>-1},handleGroupDisabled:function(t){this.groupDisabled=t},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(t){this.visible=new RegExp(Object(c.escapeRegexpString)(t),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){this.select.onOptionDestroy(this.select.options.indexOf(this))}},f=n(0),component=Object(f.a)(h,o,[],!1,null,null,null);component.options.__file="packages/select/src/option.vue";e.a=component.exports},4:function(t,e){t.exports=n(92)},52:function(t,e,n){"use strict";n.r(e);var o=n(33);o.a.install=function(t){t.component(o.a.name,o.a)},e.default=o.a}})},345:function(t,e,n){"use strict";var o=n(315),l=n.n(o);e.default=l.a},348:function(t,e,n){"use strict";var o={props:{item:{type:Object,required:!0},showUser:{type:Boolean,default:!0},showArea:{type:Boolean,default:!0},secretLink:{type:String,default:""}}},l={name:"PinArticle",mixins:[o]},r=n(345),c=n(18);var d={name:"PinFlowItem",components:{Type1:Object(c.a)(l,function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return o("li",{class:e.$style["pin-1"]},[o("NLink",{staticClass:"only-h5",class:e.$style["pin-1-h5"],attrs:{to:e.$alias.pin(e.secretLink||e.item.slug)}},[e._v("\n    "+e._s(e.item.title.text)+"\n  ")]),e._v(" "),o("div",{staticClass:"only-pc",class:[e.$style["pin-1-pc"],(t={},t[e.$style["pin-1-pc-media"]]=e.item.media,t)]},[o("h2",{class:e.$style.title},[o("NLink",{staticClass:"fade-link",attrs:{target:"_blank",to:e.$alias.pin(e.secretLink||e.item.slug)},domProps:{textContent:e._s(e.item.title.text)}}),e._v(" "),e.showArea?[e.item.area?o("NLink",{attrs:{to:e.$alias.tag(e.item.area.slug),target:"_blank"}},[o("VImg",{attrs:{src:e.item.area.avatar,width:"24",height:"24",radius:"5px"}})],1):e.item.topic?o("NLink",{attrs:{to:e.$alias.tag(e.item.topic.slug),target:"_blank"}},[o("VImg",{attrs:{src:e.item.topic.avatar,width:"24",height:"24",radius:"5px"}})],1):e._e()]:e._e()],2),e._v(" "),o("div",{staticClass:"clearfix",class:e.$style.content},[e.item.media?o("NLink",{class:e.$style.media,attrs:{to:e.$alias.pin(e.secretLink||e.item.slug),target:"_blank"}},[e.item.media.first_video?o("div",{class:e.$style.video},[e.item.media.banner?o("VImg",{attrs:{src:e.item.media.banner.url,width:"187",height:"105"}}):e._e(),e._v(" "),o("i",{staticClass:"iconfont ic-bilibili",class:e.$style.badge})],1):e.item.media.first_music?o("div",{class:e.$style.music},[e.item.media.banner?o("VImg",{attrs:{src:e.item.media.banner.url,width:"187",height:"105"}}):e._e(),e._v(" "),o("i",{staticClass:"iconfont ic-netease",class:e.$style.badge})],1):o("VImg",{attrs:{src:e.item.media.banner.url,width:"187",height:"105"}}),e._v(" "),o("div",{class:e.$style.text},[o("i",{staticClass:"iconfont ic-video"}),e._v(" "),o("span",{domProps:{textContent:e._s(e.item.media.video_count)}}),e._v(" "),o("i",{staticClass:"iconfont ic-systemprompt"}),e._v(" "),o("span",{domProps:{textContent:e._s(e.item.media.music_count)}}),e._v(" "),o("i",{staticClass:"iconfont ic-camera"}),e._v(" "),o("span",{domProps:{textContent:e._s(e.item.media.image_count)}})])],1):e._e(),e._v(" "),o("div",{class:e.$style.desc},[o("main",[o("p",{domProps:{textContent:e._s(e.item.intro)}})]),e._v(" "),o("footer",[e.showUser?o("NLink",{staticClass:"oneline",attrs:{to:e.$alias.user(e.item.author.slug),target:"_blank"}},[o("VImg",{attrs:{src:e.item.author.avatar,radius:"50%",width:"24",height:"24"}}),e._v("\n             \n            "),o("span",{domProps:{textContent:e._s(e.item.author.nickname)}})],1):e._e(),e._v(" "),o("div",[o("i",{staticClass:"iconfont ic-message_fill"}),e._v(" "),o("span",{domProps:{textContent:e._s(e.item.comment_count)}})]),e._v(" "),o("div",[o("i",{staticClass:"iconfont ic-good_fill"}),e._v(" "),o("span",{domProps:{textContent:e._s(e.item.like_count)}})]),e._v(" "),o("div",[o("i",{staticClass:"iconfont ic-mark_fill"}),e._v(" "),o("span",{domProps:{textContent:e._s(e.item.mark_count)}})]),e._v(" "),o("div",[o("i",{staticClass:"iconfont ic-browse_fill"}),e._v(" "),o("span",{domProps:{textContent:e._s(e.item.visit_count)}})])],1)])],1)])],1)},[],!1,function(t){this.$style=r.default.locals||r.default},null,null).exports},mixins:[o],data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},h=Object(c.a)(d,function(){var t=this.$createElement,e=this._self._c||t;return this.item?e("type-"+this.item.content_type,{tag:"component",attrs:{item:this.item,"show-user":this.showUser,"show-area":this.showArea,"secret-link":this.secretLink}}):this._e()},[],!1,null,null,null);e.a=h.exports},354:function(t,e,n){"use strict";n(189);var o=n(325),l=n.n(o),r=n(342),c=n.n(r),d=n(348),h={name:"SkeletonArticle",components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},f=(n(473),n(18)),m=Object(f.a)(h,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"skeleton-article"},[n("div",{staticClass:"header"},[n("div",{staticClass:"title gray"}),t._v(" "),n("div",{staticClass:"area gray"})]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"image gray"}),t._v(" "),n("div",{staticClass:"intro"},[n("div",{staticClass:"text"},[n("div",{staticClass:"text-long gray"}),t._v(" "),n("div",{staticClass:"text-shorten gray"})]),t._v(" "),n("div",{staticClass:"metas"},[n("div",{staticClass:"meta gray"}),t._v(" "),n("div",{staticClass:"meta gray"}),t._v(" "),n("div",{staticClass:"meta gray"}),t._v(" "),n("div",{staticClass:"meta gray"}),t._v(" "),n("div",{staticClass:"meta gray"})])])])])}],!1,null,null,null).exports,v={name:"PinFlowList",components:{ElSelect:c.a,ElOption:l.a,PinFlowItem:d.a,SkeletonArticle:m},props:{slug:{type:String,required:!0},loop:{type:Number,default:0}},data:function(){return{time:"3-day",sort:"active"}},computed:{sortOpts:function(){return[{label:"热门",value:"active"},{label:"最新",value:"newest"},{label:"热榜",value:"hottest"}]},timeOpts:function(){return[{label:"3天内",value:"3-day"},{label:"7天内",value:"7-day"},{label:"30天内",value:"30-day"},{label:"全部",value:"all"}]},query:function(){return{$axios:this.$axios,slug:this.slug,sort:this.sort,loop:this.loop,time:this.time,take:10,changing:"slug"}}},methods:{changeSort:function(t){t!==this.sort&&(this.sort=t,this.$refs.loader.refresh())},changeTime:function(){this.$refs.loader.refresh()},patchPin:function(t){var e=this,data=t.data;this.$axios.$get("v1/pin/batch_patch",{params:{slug:data.result.map(function(t){return t.slug}).join(",")}}).then(function(t){e.$refs.loader.patch(t)}).catch(function(){})}}},_=(n(474),Object(f.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pin-flow-list"},[n("ul",{staticClass:"sortable"},[t._l(t.sortOpts,function(e){return n("li",{key:e.value,class:{"is-active":e.value===t.sort},domProps:{textContent:t._s(e.label)},on:{click:function(n){return t.changeSort(e.value)}}})}),t._v(" "),"hottest"===t.sort?n("ElSelect",{attrs:{size:"mini"},on:{change:t.changeTime},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}},t._l(t.timeOpts,function(t){return n("ElOption",{key:t.value,attrs:{label:t.label,value:t.value}})}),1):t._e()],2),t._v(" "),n("FlowLoader",{ref:"loader",attrs:{func:"getTagFlows",type:"newest"===t.sort?"lastId":"seenIds",query:t.query,callback:t.patchPin},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.flow;return n("ul",{staticClass:"flows"},t._l(o,function(e){return n("PinFlowItem",{key:e.slug,attrs:{"show-area":!!t.loop,item:e}})}),1)}}])},[t._v(" "),n("SkeletonArticle",{attrs:{slot:"loading"},slot:"loading"})],1)],1)},[],!1,null,null,null));e.a=_.exports},355:function(t,e,n){"use strict";n(189);function o(t,e){var n=e?"scrollTop":"scrollLeft",o=t[e?"pageYOffset":"pageXOffset"];return"number"!=typeof o&&(o=window.document.documentElement[n]),o}var l={name:"Affix",props:{top:{type:Number,default:0},bottom:{type:Number,default:void 0}},data:function(){return{affix:!1,styles:{},slot:!1,slotStyle:{}}},computed:{offsetType:function(){var t="top";return this.bottom>=0&&(t="bottom"),t},classes:function(){return[{"v-affix":this.affix}]}},mounted:function(){var t=this,e=this._getScrollTarget();this.$utils.on(e,"scroll",this.handleScroll),this.$utils.on(e,"resize",this.handleScroll),this.$nextTick(function(){t.handleScroll({type:"scroll"})})},beforeDestroy:function(){var t=this._getScrollTarget();this.$utils.off(t,"scroll",this.handleScroll),this.$utils.off(t,"resize",this.handleScroll)},methods:{_getScrollTarget:function(){var t=this.$el;if(!t)return null;for(;t&&"HTML"!==t.tagName&&"BOYD"!==t.tagName&&1===t.nodeType;){var e=window.getComputedStyle(t).overflowY;if("scroll"===e||"auto"===e)return"HTML"===t.tagName||"BODY"===t.tagName?document:t;t=t.parentNode}return document},handleScroll:function(t){var e=this.affix,n=o(window,!0),l=function(element){var rect=element.getBoundingClientRect(),t=o(window,!0),e=o(window),n=window.document.body,l=n.clientTop||0,r=n.clientLeft||0;return{top:rect.top+t-l,left:rect.left+e-r}}(this.$el),r=window.innerHeight,c=this.$el.getElementsByTagName("div")[0].offsetHeight,d=!e||"resize"===t.type;l.top-this.top<n&&"top"===this.offsetType&&d?(this.affix=!0,this.slotStyle={width:this.$refs.point.clientWidth+"px",height:this.$refs.point.clientHeight+"px"},this.slot=!0,this.styles={top:"".concat(this.top,"px"),left:"".concat(l.left,"px"),width:"".concat(this.$el.offsetWidth,"px")},this.$emit("on-change",!0)):l.top-this.top>n&&"top"===this.offsetType&&e&&(this.slot=!1,this.slotStyle={},this.affix=!1,this.styles=null,this.$emit("on-change",!1)),l.top+this.bottom+c>n+r&&"bottom"===this.offsetType&&d?(this.affix=!0,this.styles={bottom:"".concat(this.bottom,"px"),left:"".concat(l.left,"px"),width:"".concat(this.$el.offsetWidth,"px")},this.$emit("on-change",!0)):l.top+this.bottom+c<n+r&&"bottom"===this.offsetType&&e&&(this.affix=!1,this.styles=null,this.$emit("on-change",!1))}}},r=(n(472),n(18)),component=Object(r.a)(l,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"point",class:this.classes,style:this.styles},[this._t("default")],2),this._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:this.slot,expression:"slot"}],style:this.slotStyle})])},[],!1,null,null,null);e.a=component.exports},375:function(t,e,n){},376:function(t,e,n){},377:function(t,e,n){},472:function(t,e,n){"use strict";var o=n(375);n.n(o).a},473:function(t,e,n){"use strict";var o=n(376);n.n(o).a},474:function(t,e,n){"use strict";var o=n(377);n.n(o).a}}]);